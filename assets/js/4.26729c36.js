(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{373:function(t,e,a){t.exports=a.p+"assets/img/AppSchema.c8dd9b8a.png"},374:function(t,e,a){t.exports=a.p+"assets/img/CustomScope.58aa4a05.png"},375:function(t,e,a){t.exports=a.p+"assets/img/CustomClaims.43f9ce9b.png"},376:function(t,e,a){t.exports=a.p+"assets/img/Policy_DACUsers.4b536a7b.png"},377:function(t,e,a){t.exports=a.p+"assets/img/Policy_EveryoneElse.95b9e152.png"},378:function(t,e,a){t.exports=a.p+"assets/img/okta-api-scopes.d1de450c.png"},379:function(t,e,a){t.exports=a.p+"assets/img/user-activation-email.0509dcfd.png"},395:function(t,e,a){"use strict";a.r(e);var o=a(42),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"configure-okta"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#configure-okta"}},[t._v("#")]),t._v(" Configure Okta")]),t._v(" "),o("h2",{attrs:{id:"terraform"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#terraform"}},[t._v("#")]),t._v(" Terraform")]),t._v(" "),o("p",[t._v("We use the "),o("a",{attrs:{href:"https://www.terraform.io/docs/providers/okta/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Okta Terraform Provider"),o("OutboundLink")],1),t._v(" to automatically configure the Okta Org. Refer to the "),o("a",{attrs:{href:"terraform"}},[t._v("terraform")]),t._v(" section for more information.")]),t._v(" "),o("p",[t._v("If you're more comfortable configuring the org manually, Follow the steps below:")]),t._v(" "),o("h2",{attrs:{id:"manual-config"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#manual-config"}},[t._v("#")]),t._v(" Manual Config")]),t._v(" "),o("h4",{attrs:{id:"_1-add-superusers-group-and-role"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_1-add-superusers-group-and-role"}},[t._v("#")]),t._v(" 1. Add SUPERUSERS Group and Role")]),t._v(" "),o("h5",{attrs:{id:"add-a-group"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#add-a-group"}},[t._v("#")]),t._v(" Add A Group:")]),t._v(" "),o("ul",[o("li",[t._v("Name: "),o("strong",[t._v("SUPERUSERS")])]),t._v(" "),o("li",[t._v("Description: (optional)")])]),t._v(" "),o("h5",{attrs:{id:"add-an-administrator-role"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#add-an-administrator-role"}},[t._v("#")]),t._v(" Add An Administrator Role:")]),t._v(" "),o("ul",[o("li",[t._v("From Security > Administrators, Click [Add Administrator Group]\n"),o("ul",[o("li",[t._v("Grant administrator role to "),o("code",[t._v("SUPERUSERS")])]),t._v(" "),o("li",[t._v("Administrator roles: "),o("strong",[t._v("Super Administrator")])])])])]),t._v(" "),o("h4",{attrs:{id:"_2-add-byob-dashboard-app"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_2-add-byob-dashboard-app"}},[t._v("#")]),t._v(" 2. Add byob-dashboard app")]),t._v(" "),o("ul",[o("li",[t._v("Application type: "),o("strong",[t._v("Single Page App (SPA)")])]),t._v(" "),o("li",[t._v("Allowed grand types: "),o("strong",[t._v("Authorization Code")])]),t._v(" "),o("li",[t._v("Login redirect URIs: "),o("strong",[t._v("http://localhost:8081/oauth/callback")])]),t._v(" "),o("li",[t._v("Logout redirect URIs: "),o("strong",[t._v("http://localhost:8081")])]),t._v(" "),o("li",[t._v("Client authentication: "),o("strong",[t._v("Use PKCE (for public clients)")])])]),t._v(" "),o("h4",{attrs:{id:"_3-add-okta-dac-app"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_3-add-okta-dac-app"}},[t._v("#")]),t._v(" 3. Add okta-dac app")]),t._v(" "),o("ul",[o("li",[t._v("Application type: "),o("strong",[t._v("Single Page App (SPA)")])]),t._v(" "),o("li",[t._v("Allowed grand types: "),o("strong",[t._v("Authorization Code")])]),t._v(" "),o("li",[t._v("Login redirect URIs: "),o("strong",[t._v("http://localhost:8080/oauth/callback")])]),t._v(" "),o("li",[t._v("Logout redirect URIs: "),o("strong",[t._v("http://localhost:8080")])]),t._v(" "),o("li",[t._v("Client authentication: "),o("strong",[t._v("Use PKCE (for public clients)")])])]),t._v(" "),o("h4",{attrs:{id:"_4-add-custom-app-profile-attribute"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_4-add-custom-app-profile-attribute"}},[t._v("#")]),t._v(" 4. Add custom app profile attribute")]),t._v(" "),o("p",[t._v("Add custom profile attribute to the "),o("strong",[t._v("okta-dac")]),t._v(" application "),o("em",[t._v("App Profile")])]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("The "),o("code",[t._v("APPLICATION_ENTITLEMENT_POLICY")]),t._v(" feature flag must be enabled for the Okta Org")]),t._v(" "),o("p",[t._v("This feature flag, when enabled allows configuration of app profile attributes that are tied to a Group. Meaning, when you set the value of the attribute, you set it to the Group assigned to the app, as opposed to directly setting it against a user. All users whom are members of the group will have the same value for said attribute.")])]),t._v(" "),o("ul",[o("li",[t._v("Data type: "),o("strong",[t._v("string array")])]),t._v(" "),o("li",[t._v("Display name: "),o("strong",[t._v("Tenants")])]),t._v(" "),o("li",[t._v("Attribute type: "),o("strong",[t._v("Group")])]),t._v(" "),o("li",[t._v("Group Priority: "),o("strong",[t._v("Combine values across groups")])])]),t._v(" "),o("p",[o("img",{attrs:{src:a(373),alt:"alt text"}})]),t._v(" "),o("h4",{attrs:{id:"_5-add-custom-dac-admins-scope-to-the-default-authorizationserver"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_5-add-custom-dac-admins-scope-to-the-default-authorizationserver"}},[t._v("#")]),t._v(" 5. Add custom "),o("code",[t._v("dac.admins")]),t._v(" scope to the "),o("code",[t._v("default")]),t._v(" AuthorizationServer")]),t._v(" "),o("p",[o("img",{attrs:{src:a(374),alt:"alt text"}})]),t._v(" "),o("h4",{attrs:{id:"_6-add-custom-claims"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_6-add-custom-claims"}},[t._v("#")]),t._v(" 6. Add custom claims")]),t._v(" "),o("p",[t._v("Setup default "),o("code",[t._v("groups")]),t._v(" claim:")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("claim")]),t._v(" "),o("th",[t._v("expression")]),t._v(" "),o("th",[t._v("scope")]),t._v(" "),o("th",[t._v("token")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("code",[t._v("groups")])]),t._v(" "),o("td",[o("code",[t._v("groups matches .*")])]),t._v(" "),o("td",[o("code",[t._v("Any")])]),t._v(" "),o("td",[t._v("id_token & access_token")])])])]),t._v(" "),o("p",[t._v("Setup claims bound to the custom scope "),o("code",[t._v("dac.admin")]),t._v(" with the following values:")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("claim")]),t._v(" "),o("th",[t._v("expression")]),t._v(" "),o("th",[t._v("scope")]),t._v(" "),o("th",[t._v("token")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("code",[t._v("tenants")])]),t._v(" "),o("td",[o("code",[t._v("appuser.tenants")])]),t._v(" "),o("td",[o("code",[t._v("dac.admin")])]),t._v(" "),o("td",[t._v("id_token & access_token")])])])]),t._v(" "),o("p",[o("img",{attrs:{src:a(375),alt:"alt text"}})]),t._v(" "),o("h4",{attrs:{id:"_7-configure-access-policies"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_7-configure-access-policies"}},[t._v("#")]),t._v(" 7. Configure Access Policies")]),t._v(" "),o("ol",[o("li",[t._v("Add a policy:\n"),o("ul",[o("li",[t._v("Name: (e.g.) "),o("strong",[t._v("DAC Users")]),t._v(" (You can choose your own name)")]),t._v(" "),o("li",[t._v("Assigned to clients: "),o("strong",[t._v("okta-dac")])]),t._v(" "),o("li",[t._v("Add a rule:\nIF "),o("code",[t._v("Grant type is Authorization Code")]),t._v(" AND "),o("code",[t._v("User is Any user assigned the app")]),t._v(" AND "),o("code",[t._v("Scopes requested = Any Scopes")]),t._v(" THEN "),o("code",[t._v("No inline hook")]),t._v(" AND "),o("code",[t._v("Access token lifetime is 1 Hours")]),t._v(" AND "),o("code",[t._v("Refresh token lifetime is unlimited")]),t._v(" "),o("img",{attrs:{src:a(376),alt:"alt text"}})])])]),t._v(" "),o("li",[t._v("Update the default policy:\n"),o("ul",[o("li",[t._v("Name: Can leave as is. We decided to name it "),o("strong",[t._v("Everyone Else")])]),t._v(" "),o("li",[t._v("Assigned to clients: "),o("strong",[t._v("All Clients")])]),t._v(" "),o("li",[t._v("Configure the default policy rule:\nIF "),o("code",[t._v("Grant type is Authorization Code")]),t._v(" AND "),o("code",[t._v("User is Any user assigned the app")]),t._v(" AND "),o("code",[t._v("Scopes requested = [openid, profile, email, address, phone, offline_access]")]),t._v(" THEN "),o("code",[t._v("No inline hook")]),t._v(" AND "),o("code",[t._v("Access token lifetime is 1 Hours")]),t._v(" AND "),o("code",[t._v("Refresh token lifetime is unlimited")]),o("br"),t._v(" "),o("img",{attrs:{src:a(377),alt:"alt text"}})])])])]),t._v(" "),o("h4",{attrs:{id:"_8-add-cors"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_8-add-cors"}},[t._v("#")]),t._v(" 8. Add CORS")]),t._v(" "),o("ul",[o("li",[t._v("Add a Trusted Origin: "),o("strong",[t._v("http://localhost:8081")]),t._v(", Type="),o("strong",[t._v("CORS")])]),t._v(" "),o("li",[t._v("Add a Trusted Origin: "),o("strong",[t._v("http://localhost:8080")]),t._v(", Type="),o("strong",[t._v("CORS")])])]),t._v(" "),o("h4",{attrs:{id:"_9-enable-oauth-grants"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_9-enable-oauth-grants"}},[t._v("#")]),t._v(" 9. Enable OAuth grants")]),t._v(" "),o("p",[o("img",{attrs:{src:a(378),alt:"alt text"}})]),t._v(" "),o("ol",[o("li",[t._v("Navigate to the "),o("strong",[t._v("okta-dac")]),t._v(" application")]),t._v(" "),o("li",[t._v("In the "),o("strong",[t._v("Okta API Scopes")]),t._v(" tab, and Grant the following scopes:\n"),o("ul",[o("li",[o("code",[t._v("okta.groups.manage")])]),t._v(" "),o("li",[o("code",[t._v("okta.users.manage")])])])])]),t._v(" "),o("h4",{attrs:{id:"_10-update-user-activation-email-template"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#_10-update-user-activation-email-template"}},[t._v("#")]),t._v(" 10. Update User Activation Email Template")]),t._v(" "),o("p",[o("img",{attrs:{src:a(379),alt:"alt text"}})]),t._v(" "),o("p",[t._v("Both "),o("strong",[t._v("okta-dac")]),t._v(" and "),o("strong",[t._v("byob-dashboard")]),t._v(" implement a custom user welcome page. Update the "),o("strong",[t._v("User Activation")]),t._v(" email template:")]),t._v(" "),o("ul",[o("li",[t._v("Replace "),o("code",[t._v("${activationLink}")]),t._v(" (shown above) with "),o("code",[t._v("http://localhost:8081/activate/${activationToken}")]),t._v(" "),o("ul",[o("li",[t._v("This will send users to "),o("strong",[t._v("byob-dashboard")]),t._v(' (i.e. port 8081) on a custom "welcome page" (i.e. on the path '),o("code",[t._v("/activate")]),t._v(")")])])]),t._v(" "),o("li",[t._v("If you're only running "),o("strong",[t._v("okta-dac")]),t._v(" then replace it with "),o("code",[t._v("http://localhost:8080/activate/${activationToken}")]),t._v(" (or appropriate port or "),o("code",[t._v("base_url")]),t._v(" of the deployed application).")])])])}),[],!1,null,null,null);e.default=s.exports}}]);