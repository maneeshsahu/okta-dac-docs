(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{312:function(t,s,a){t.exports=a.p+"assets/img/dac-demo.4bc63a17.gif"},397:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),n("p",[t._v("This section discusses the design for okta-dac "),n("a",{attrs:{href:"/api"}},[t._v("APIs")]),t._v(".")]),t._v(" "),n("h2",{attrs:{id:"oauth-for-okta"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oauth-for-okta"}},[t._v("#")]),t._v(" OAuth for Okta")]),t._v(" "),n("p",[t._v("With "),n("a",{attrs:{href:"https://developer.okta.com/docs/guides/implement-oauth-for-okta/overview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("OAuth for Okta"),n("OutboundLink")],1),t._v(", you are able to interact with Okta APIs using scoped OAuth 2.0 access tokens. Each access token enables the bearer to perform specific actions on specific Okta endpoints, with that ability controlled by which scopes the access token contains.")]),t._v(" "),n("p",[t._v("The "),n("a",{attrs:{href:"https://developer.okta.com/docs/guides/implement-oauth-for-okta/scopes/",target:"_blank",rel:"noopener noreferrer"}},[t._v("scopes"),n("OutboundLink")],1),t._v(" that we request are:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("okta.users.manage")]),t._v(" so that we can read, add, and update users")]),t._v(" "),n("li",[n("code",[t._v("okta.groups.manage")]),t._v(" so that we can read and update groups")])]),t._v(" "),n("p",[n("em",[n("strong",[t._v("If you are a Group Admin and obtain an access_token from Okta with the above scopes, you can use it on the "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/users/",target:"_blank",rel:"noopener noreferrer"}},[t._v("users"),n("OutboundLink")],1),t._v(" and "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/groups/",target:"_blank",rel:"noopener noreferrer"}},[t._v("groups"),n("OutboundLink")],1),t._v(" APIs. Most importantly, the API responses are automatically filtered according to your Group Admin privileges.")])]),t._v(" For example, calling "),n("code",[t._v("GET /users")]),t._v(" will return only users in the groups you manage; Calling "),n("code",[t._v("GET /groups")]),t._v(" will only return groups you manage, etc.")]),t._v(" "),n("p",[t._v("In order to get an access_token with these scopes, we rely on the Okta session.")]),t._v(" "),n("h3",{attrs:{id:"okta-session"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#okta-session"}},[t._v("#")]),t._v(" Okta session")]),t._v(" "),n("p",[t._v("Okta uses a cookie-based authentication mechanism to maintain a user's authentication "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/sessions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("session"),n("OutboundLink")],1),t._v(" across web requests.")]),t._v(" "),n("ul",[n("li",[t._v("When a user signs into okta-dac, a session is created in Okta and persisted on the browser with a cookie.")]),t._v(" "),n("li",[t._v("Leveraging this existing session, we can then "),n("strong",[t._v("fetch the bearer token")]),t._v(" without the need to re-authenticate. We use the "),n("a",{attrs:{href:"https://github.com/okta/okta-auth-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Okta Auth JavaScript SDK"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("getWithoutPrompt")]),t._v(" function to silently get this token. Below is the sample code:")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//src/views/Home.vue")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" authJs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AuthJS")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    issuer"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oidc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("issuer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oauth2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    clientId"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oidc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("client_id"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    redirectUri"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("oidc"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("redirect_uri"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    pkce"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" exists "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" authJs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("exists")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("exists"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" authJs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getWithoutPrompt")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            scopes"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta.users.manage"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okta.groups.manage"')]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" accessToken "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("token")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vuex")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"setO4oToken"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" accessToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessToken"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("mutation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" state")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Got mutation"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mutation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/okta/okta-auth-js#sessionexists",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("authJs.session.exists()")]),n("OutboundLink")],1),t._v(" checks to see if user has logged-in (i.e. an Okta session exists)")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/okta/okta-auth-js#tokengetwithoutpromptoptions",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("authJs.token.getWithoutPrompt()")]),n("OutboundLink")],1),t._v(" makes an OAuth "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/oidc/#authorize",target:"_blank",rel:"noopener noreferrer"}},[t._v("authorize"),n("OutboundLink")],1),t._v(" request with "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/oidc/#parameter-details",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("&prompt=none")]),n("OutboundLink")],1),t._v(". As a session cookie is present in the request, the user does not need to authenticate again.")])]),t._v(" "),n("p",[t._v("In okta-dac, a good place to run this piece of code is in "),n("code",[t._v("src/views/Home.vue")]),t._v(", during the on created event. This is because upon logging into okta-dac, the first component we land on is Home.vue.")]),t._v(" "),n("p",[t._v("Once we get the access_token we use it to implement list/search users, add users, update users, assign apps, etc.")]),t._v(" "),n("p",[n("img",{attrs:{src:a(312),alt:"alt text"}})]),t._v(" "),n("h2",{attrs:{id:"api-access-management"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#api-access-management"}},[t._v("#")]),t._v(" API Access Management")]),t._v(" "),n("p",[t._v("Because we synthetically created a Tenants structure in the Okta org, we need to write our own "),n("RouterLink",{attrs:{to:"/api/#tenants"}},[t._v("Tenants API")]),t._v(" to wrap around the Okta CRUD APIs and perform custom filtering of the CRUD API's results.")],1),t._v(" "),n("p",[t._v("Over here, we leverage "),n("a",{attrs:{href:"https://developer.okta.com/docs/concepts/api-access-management/",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Access Management"),n("OutboundLink")],1),t._v(' – Okta\'s implementation of the OAuth 2.0 standard – to secure our "wrapper APIs", which implement the business logic abstraction layer that generates our "tenant" structure in the Okta org. (Please refer to '),n("RouterLink",{attrs:{to:"/api/#composite-apis"}},[t._v("composite APIs")]),t._v(" for documentation).")],1),t._v(" "),n("p",[n("strong",[t._v("Couple of custom claims are essential to the proper functioning of okta-dac. Okta's API Access Management makes it easy to generate JWTs and embed custom claims:")])]),t._v(" "),n("h3",{attrs:{id:"the-tenants-claim"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#the-tenants-claim"}},[t._v("#")]),t._v(" The "),n("code",[t._v("tenants")]),t._v(" claim")]),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v("The "),n("code",[t._v("APPLICATION_ENTITLEMENT_POLICY")]),t._v(" "),n("strong",[t._v("feature flag")]),t._v(" must be enabled for the Okta Org")])]),t._v(" "),n("p",[t._v('We configure Okta to store a User App Attribute called "Tenants" and display its value in a custom claim called '),n("code",[t._v("tenants")]),t._v(". See:")]),t._v(" "),n("ul",[n("li",[t._v("Custom App Profile Attribute. "),n("RouterLink",{attrs:{to:"/setup/org-setup.html#_4-add-custom-app-profile-attribute"}},[t._v("Config steps")]),t._v(".")],1),t._v(" "),n("li",[t._v("The "),n("code",[t._v("tenants")]),t._v(" custom claim. "),n("RouterLink",{attrs:{to:"/setup/org-setup.html#_6-add-custom-claims"}},[t._v("Config steps")]),t._v(".")],1)]),t._v(" "),n("p",[t._v("We populate "),n("code",[t._v("tenants")]),t._v(" using a special format: "),n("code",[t._v("${tenantId}:${tenantName}:${usersGroupId}")]),t._v(". This is done inside our "),n("RouterLink",{attrs:{to:"/api/#add-tenant"}},[t._v("Add Tenant")]),t._v(" API code by calling "),n("em",[n("strong",[n("code",[t._v("PUT")])]),n("code",[t._v("apps/${appId}/groups/${groupId}")])]),t._v(" to update the AppProfile.")],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" axios"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    orgUrl "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/v1/apps/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" clientId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/groups/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" groupId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        profile"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            tenants"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                tenantId "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" tenantName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" usersGroupId\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    headers\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("Embedding this value in the JWT provides okta-dac quick access to the tenant name and id, and its associated USERS_ group id without making additional requests to the Okta API.")]),t._v(" "),n("h3",{attrs:{id:"the-groups-claim"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#the-groups-claim"}},[t._v("#")]),t._v(" The "),n("code",[t._v("groups")]),t._v(" claim")]),t._v(" "),n("p",[t._v("We configure Okta to return the "),n("code",[t._v("groups")]),t._v(" custom claim. See "),n("RouterLink",{attrs:{to:"/setup/org-setup.html#_6-add-custom-claims"}},[t._v("steps")]),t._v(". This allows the okta-dac to:")],1),t._v(" "),n("ul",[n("li",[t._v("Differentiate Super Admins from Tenant Admins.")]),t._v(" "),n("li",[t._v("For the Tenant Admins, provide the Tenant(s) info.")]),t._v(" "),n("li",[t._v("Which apps are available for Tenants.")])]),t._v(" "),n("h4",{attrs:{id:"sample-jwt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sample-jwt"}},[t._v("#")]),t._v(" Sample JWT")]),t._v(" "),n("p",[t._v("As mentioned, the "),n("code",[t._v("tenants")]),t._v(" and "),n("code",[t._v("groups")]),t._v(" claims are crucial for the proper functioning of okta-dac. To illustrate how they're used, take a look at the sample below:")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sub"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00upkrte35fGaTMJi0h7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ver"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iss"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://byobrand.oktapreview.com/oauth2/default"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aud"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0oaph3ep6uKllifkG0h7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iat"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1588116050")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exp"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1588119650")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jti"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ID.9bXZ7w_fzcl0vR3oSTGpBWPRl6X7220uJ_3ciqpYfoY"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"amr"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pwd"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"idp"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00op8q9xatOpYa5MK0h7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nonce"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"auth_time"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"at_hash"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"preview_at_hash"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tenants"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0oapi0vtwxmVdOywi0h7:spidermonkey:00gpi18cf4SkPByz40h7"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"groups"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USERS_spidermonkey"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Everyone"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ADMINS_spidermonkey"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPUSERS_spidermonkey_0oaq1xvxlfoEEbii40h7"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"APPUSERS_spidermonkey_0oaphr8z83xlSeZAg0h7"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("This JWT is for a Tenant Admin because there is no SUPERUSERS in the "),n("code",[t._v("groups")]),t._v(" claim")]),t._v(" "),n("li",[t._v('The Tenant is "spidermonkey"')]),t._v(" "),n("li",[t._v("spidermonkey has access to 2 apps (Ids "),n("code",[t._v("0oaq1xvxlfoEEbii40h7")]),t._v(" & "),n("code",[t._v("0oaphr8z83xlSeZAg0h7")]),t._v(")")])]),t._v(" "),n("h3",{attrs:{id:"authz"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authz"}},[t._v("#")]),t._v(" AuthZ")]),t._v(" "),n("p",[t._v("The information in the above JWT is used by okta-dac to display the proper UX to the user. Not only that, it is also used to authorize access for our wrapper APIs. See "),n("a",{attrs:{href:"#custom-authorizer"}},[t._v("custom-authorizer")]),t._v(" for more info.")]),t._v(" "),n("h2",{attrs:{id:"okta-dac-composite-apis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#okta-dac-composite-apis"}},[t._v("#")]),t._v(" okta-dac Composite APIs")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),n("p",[t._v("Refer to the "),n("a",{attrs:{href:"https://github.com/oktadeveloper/okta-dac-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("okta-dac-api"),n("OutboundLink")],1),t._v(" serverless project for source code and issue tracking.")])]),t._v(" "),n("h3",{attrs:{id:"tenants-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tenants-api"}},[t._v("#")]),t._v(" "),n("RouterLink",{attrs:{to:"/api/#tenants"}},[t._v("Tenants API")])],1),t._v(" "),n("p",[t._v("Implementing the Tenants endpoint is a practice of stitching together a series of Okta API operations. We illustrate with a few examples:")]),t._v(" "),n("ul",[n("li",[n("p",[n("strong",[t._v("Example 1")]),t._v(":\nWhen we "),n("RouterLink",{attrs:{to:"/api/#add-tenant"}},[t._v("add a tenant")]),t._v(", what the client sees as one API call is actually 8 API requests:")],1),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/idps/#add-identity-provider",target:"_blank",rel:"noopener noreferrer"}},[t._v("Add Identity Provider"),n("OutboundLink")],1),t._v(" with naming convention "),n("code",[t._v("DAC_${tenantName}")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/groups/#add-group",target:"_blank",rel:"noopener noreferrer"}},[t._v("Add "),n("code",[t._v("USERS_${tenantName}")]),t._v(" group"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("Add "),n("code",[t._v("ADMINS_${tenantName}")]),t._v(". Set "),n("code",[t._v("profile.description")]),t._v("=")])]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tenantId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${id-from-step-#1}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ol",{attrs:{start:"4"}},[n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/roles/#assign-a-role-to-a-group",target:"_blank",rel:"noopener noreferrer"}},[t._v("Add a Role"),n("OutboundLink")],1),t._v(" "),n("code",[t._v("type==USER_ADMIN")]),t._v(" to the "),n("code",[t._v("ADMINS_${tenantName}")]),t._v(" group.")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/roles/#add-group-target-to-group-administrator-role-given-to-a-group",target:"_blank",rel:"noopener noreferrer"}},[t._v("Assign "),n("code",[t._v("USERS_${tenantName}")]),t._v(" role target"),n("OutboundLink")],1),t._v(" to the GroupRole from step #4.")]),t._v(" "),n("li",[t._v("Assign "),n("code",[t._v("ADMINS_${tenantName}")]),t._v(" role target the GroupRole from step #4.")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/apps/#assign-group-to-application",target:"_blank",rel:"noopener noreferrer"}},[t._v("Assign the "),n("code",[t._v("USERS_${tenantName}")]),t._v(" group"),n("OutboundLink")],1),t._v(" to the okta-dac App")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/idps/#update-identity-provider",target:"_blank",rel:"noopener noreferrer"}},[t._v("Update IdP"),n("OutboundLink")],1),t._v(" from step #1 and set JIT to group = "),n("code",[t._v("USERS_${tenantName}")]),t._v(".")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Example 2")]),t._v(": When we "),n("RouterLink",{attrs:{to:"/api/#get-tenant"}},[t._v("get a tenant")]),t._v(" by name, we call the "),n("a",{attrs:{href:"https://developer.okta.com/docs/reference/api/groups/#search-groups",target:"_blank",rel:"noopener noreferrer"}},[t._v("Search Groups"),n("OutboundLink")],1),t._v(" API. This is because every tenant has an equivalent "),n("code",[t._v("ADMINS_${tenantName}")]),t._v(" group and there is no search IdPs API.")],1)]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Example 3")]),t._v(": "),n("RouterLink",{attrs:{to:"/api/#tenant-apps"}},[t._v("Tenant Apps")])],1),t._v(" "),n("ul",[n("li",[t._v('When we "add tenant app", we create a '),n("code",[t._v("APPUSERS_${tenantName}_${appId}")]),t._v(" group.")]),t._v(" "),n("li",[t._v('When we "list tenant apps", we search groups using the parameter '),n("code",[t._v("q=APPUSERS_${tenantName}")])])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Example 4")]),t._v(": "),n("RouterLink",{attrs:{to:"/api/#tenant-admins"}},[t._v("Tenant Admins")])],1),t._v(" "),n("ul",[n("li",[t._v('When we "list tenant admins", we return all users for the group '),n("code",[t._v("ADMINS_${tenantName}")]),t._v(".")]),t._v(" "),n("li",[t._v('When we "assign tenant admin", we add a user to the '),n("code",[t._v("ADMINS_${tenantName}")]),t._v(" group.")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("Example 5")]),t._v(": "),n("RouterLink",{attrs:{to:"/api/#tenant-domains"}},[t._v("Tenant Domains")])],1),t._v(" "),n("ul",[n("li",[t._v('When we "add a tenant domain", we add a routing rule (or update an existing routing rule)')]),t._v(" "),n("li",[t._v('When we "list domains for a tenant", we lookup the routing rule and (if exists) list all of its domains')])])])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v("Refer to the source code for implementation details")])]),t._v(" "),n("h3",{attrs:{id:"idps-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#idps-api"}},[t._v("#")]),t._v(" "),n("RouterLink",{attrs:{to:"/api/#idps"}},[t._v("IdPs API")])],1),t._v(" "),n("p",[t._v("Keep in mind that we store the IdP Id in the "),n("code",[t._v("ADMINS_${tenantName}")]),t._v(" group's "),n("code",[t._v("profile.description")]),t._v(' as the "tenantId":')]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tenantId"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${id-from-step-#1}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("This allows us to implement the "),n("RouterLink",{attrs:{to:"/api/#get-idp"}},[t._v("Get Idp")]),t._v(" composite API:")],1),t._v(" "),n("ol",[n("li",[t._v("Search Groups with "),n("code",[t._v("q=ADMINS_${tenantName}")])]),t._v(" "),n("li",[t._v("Parse the "),n("code",[t._v("profile.description")]),t._v(' for the "tenantId"')]),t._v(" "),n("li",[t._v("Read back the Idp (by Id) from step #2")])]),t._v(" "),n("p",[t._v("Similarly, "),n("RouterLink",{attrs:{to:"/api/#update-idp"}},[t._v("Update Idp")]),t._v(" triggers:")],1),t._v(" "),n("ol",[n("li",[t._v("Search Groups with "),n("code",[t._v("q=ADMINS_${tenantName}")])]),t._v(" "),n("li",[t._v("Parse the "),n("code",[t._v("profile.description")]),t._v(' for the "tenantId"')]),t._v(" "),n("li",[t._v("Update Idp (by Id) from step #2")])]),t._v(" "),n("h3",{attrs:{id:"apps-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#apps-api"}},[t._v("#")]),t._v(" "),n("RouterLink",{attrs:{to:"/api/#apps"}},[t._v("Apps API")])],1),t._v(" "),n("p",[t._v("We implemented a "),n("RouterLink",{attrs:{to:"/api/#list-apps"}},[t._v("List Apps")]),t._v(" API which is context sensitive to the Bearer token of the request. If the token's "),n("code",[t._v("groups")]),t._v(" claim contains "),n("code",[t._v("SUPERUSERS")]),t._v(", then list all apps that "),n("strong",[t._v("startsWith")]),t._v(" "),n("code",[t._v("DAC_")]),t._v(". Else, list all apps that "),n("strong",[t._v("startswith")]),t._v(" "),n("code",[t._v("APPUSERS_${tenantName}")]),t._v(". For implementation details refer to the project source code.")],1),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),n("p",[t._v("To distinguish between SaaS provider products/apps and other apps in Okta, we simply prefix them with "),n("code",[t._v("DAC_")])])]),t._v(" "),n("h3",{attrs:{id:"custom-authorizer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#custom-authorizer"}},[t._v("#")]),t._v(" Custom Authorizer")]),t._v(" "),n("p",[t._v("Amazon API Gateway supports custom authorizers where you can restrict access to the exact HTTP method and route. We rely heavily on this functionality to provide AuthZ functionality to our composite APIs.")]),t._v(" "),n("p",[t._v("In the custom authorizer, we restrict access to the tenant-namespaced route based on which tenant the user is an ADMIN of. Keep in mind that our JWT contains the "),n("code",[t._v("tenants")]),t._v(" and "),n("code",[t._v("groups")]),t._v(" claims, which give us the AuthZ information that we need to generate the following policy:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Everyone can read apps")]),t._v("\npolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apps'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\npolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'apps/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Only superusers can read and add tenants")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jwt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("claims"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groups "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" jwt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("claims"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groups"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SUPERUSERS'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ALL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" tenants "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jwt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("claims"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tenants"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tenants "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" tenants"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'idps'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    tenants"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("tenant")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parts "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tenant"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("':'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Tenant Admins can read and update their own idp settings")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'idps/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'idps/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/metadata.xml'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'idps/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Read own tenants")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/domains'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/domains/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/admins/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assign Tenant Admins")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/domains'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register Tenant Domains")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/domains/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Verify Tenant Domains")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/domains/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// De-register Tenant Domains")]),t._v("\n        policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("allowMethod")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AuthPolicy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HttpVerb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'tenants/'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" parts"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/apps/*'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assign all tenant users to app")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("hr"),t._v(" "),n("h2",{attrs:{id:"next-steps"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[t._v("#")]),t._v(" Next Steps")]),t._v(" "),n("p",[t._v("If you're ready to test out the sample project(s), head over to the "),n("RouterLink",{attrs:{to:"/setup/"}},[t._v("Setup")]),t._v(" section to get started.")],1)])}),[],!1,null,null,null);s.default=e.exports}}]);